{
  "desc_type": "module_emit",
  "name": "designer_intent_aligner",
  "code": "import os, json, time\\nINTENT_PATH = os.path.join('mem','designer_intent.json')\\nALIGN_PATH = os.path.join('mem','designer_alignment.json')\\n\\ndef run(ctx=None):\\n    ctx = ctx or {}\\n    if ctx.get('desc_type') == 'designer_intent_correction':\\n        target = ctx.get('target') or 'unspecified'\\n        plan = {\\n            'desc_type': 'cortex_evolution_plan',\\n            'reason': 'designer_correction',\\n            'target_intent': target,\\n            'ts': time.time(),\\n            'steps': [\\n                {\\n                    'op': 'inject_frag',\\n                    'plane': 'planner',\\n                    'code': (\\n                        \"import json\\\\n\"\\n                        f\"DEF_TARGET = {json.dumps(target)}\\\\n\"\\n                        \"def plan_bias(descs):\\\\n\"\\n                        \"    return [d for d in descs if DEF_TARGET in json.dumps(d,ensure_ascii=False)]\\\\n\"\\n                    )\\n                }\\n            ]\\n        }\\n        with open(ALIGN_PATH,'w',encoding='utf-8') as f:\\n            json.dump(plan,f,ensure_ascii=False,indent=2)\\n        return plan\\n    if os.path.exists(INTENT_PATH):\\n        with open(INTENT_PATH,'r',encoding='utf-8') as f:\\n            intent = json.load(f)\\n    else:\\n        intent = { 'hypothesis': 'inconnu' }\\n    return { 'desc_type': 'designer_intent_aligned', 'intent': intent.get('hypothesis'), 'ts': time.time() }\\n"
}