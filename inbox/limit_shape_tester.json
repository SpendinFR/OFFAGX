{
  "desc_type": "planner_frag",
  "name": "limit_shape_tester",
  "code": "import os\nimport json\nimport time\n\nSRC = 'mem/limit_hyp'\n\n\ndef _last_hyp():\n    if not os.path.exists(SRC):\n        return None\n    files = sorted([f for f in os.listdir(SRC) if f.endswith('.json')])\n    if not files:\n        return None\n    with open(os.path.join(SRC, files[-1]), 'r', encoding='utf-8') as f:\n        return json.load(f)\n\n\ndef plan(ctx: dict) -> list[dict]:\n    gen = ctx.get('gen', 0)\n    if gen % 11 != 0:\n        return []\n    hyp = _last_hyp()\n    if not hyp:\n        return []\n    core = hyp.get('core_modules', [])\n    growing = hyp.get('monotonic_additions', [])\n    tests: list[dict] = []\n    for module_name in core[:2]:\n        tests.append({\n            'desc_type': 'cortex_evolution_plan',\n            'op': 'simulate_removal',\n            'target_module_root': module_name,\n            'expected': 'system_recreates_or_degrades',\n        })\n    if growing:\n        tests.append({\n            'desc_type': 'cortex_evolution_plan',\n            'op': 'inject_noise_module',\n            'module_source': \"# noise module\\ndef run(ctx=None):\\n    return {'desc_type': 'noise_result'}\\n\",\n            'expected': 'core_resists',\n        })\n    return tests"
}
