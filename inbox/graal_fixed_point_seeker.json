{
  "desc_type": "module_emit",
  "name": "graal_fixed_point_seeker",
  "code": "import os, json, time, copy\\nFINAL = os.path.join('mem','graal','final_form.json')\\nFP = os.path.join('mem','graal','fixed_point.json')\\n\\ndef run(ctx=None):\\n    if not os.path.exists(FINAL):\\n        return {'desc_type':'graal_fp_wait_final'}\\n    with open(FINAL,'r',encoding='utf-8') as f: final = json.load(f)\\n    hypo = final.get('hypothesis')\\n    if not hypo:\\n        return {'desc_type':'graal_fp_no_hypo'}\\n    # on simule: si cette hypo etait deja le noyau, re-emettrait-elle la MEME hypo ?\\n    sim = copy.deepcopy(hypo)\\n    sim.setdefault('ts', time.time())\\n    # condition de point fixe tres naive : meme shape et meme aligned_purposes\\n    stable = (sim.get('shape') == hypo.get('shape')) and (set(sim.get('aligned_purposes',[])) == set(hypo.get('aligned_purposes',[])))\\n    if stable:\\n        out = {'desc_type':'graal_fixed_point','final_form':final,'ts':time.time()}\\n        with open(FP,'w',encoding='utf-8') as f: json.dump(out,f,ensure_ascii=False,indent=2)\\n        return out\\n    return {'desc_type':'graal_not_fixed_yet','shape':hypo.get('shape')}"
}
