{
  "desc_type": "module_emit",
  "name": "skill_registry_v1",
  "code": "import os, json, time\nREG_PATH = 'mem/skills_registry.json'\n\ndef run(ctx=None):\n    streams = (ctx or {}).get('streams') or []\n    skills = []\n    for s in streams:\n        # cas notebook: module:emitted/skill_xxx.py\n        if s.startswith('module:emitted/skill_'):\n            mod_name = s.split(':', 1)[1]\n            skills.append({ 'name': mod_name, 'ts': time.time() })\n    os.makedirs('mem', exist_ok=True)\n    with open(REG_PATH, 'w', encoding='utf-8') as f:\n        json.dump(skills, f, ensure_ascii=False, indent=2)\n    return {\n        'desc_type': 'skills_registry_state',\n        'count': len(skills),\n        'path': REG_PATH,\n        'ts': time.time()\n    }\n"
}
