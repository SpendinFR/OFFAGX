{
  "desc_type": "planner_frag",
  "name": "host_model_guided_generator",
  "code": "import os, json, time, random\\nMOD = 'mem/host_model/implicit_host_model.json'\\n\\ndef _load_model():\\n    if not os.path.exists(MOD): return None\\n    with open(MOD, 'r', encoding='utf-8') as f: return json.load(f)\\n\\ndef _score_desc(d, model):\\n    if not model: return 0\\n    ws = model.get('weights') or {}\\n    txt = json.dumps(d, ensure_ascii=False).lower()\\n    dt = d.get('desc_type','')\\n    sc = ws.get('TYPE:'+dt, 0)\\n    for w,ww in ws.items():\\n        if not w.startswith('W:'): continue\\n        tok = w[2:].lower()\\n        if tok in txt: sc += ww\\n    return sc\\n\\ndef plan(ctx: dict) -> list[dict]:\\n    gen = ctx.get('gen',0)\\n    if gen % 11 != 0: return []\\n    model = _load_model()\\n    cand = [\\n        { 'desc_type':'cortex_evolution_plan', 'op':'insert_frags', 'target':'generator', 'frags':[{'code':'# small generator bonus'}], 'note':'cf_from_model' },\\n        { 'desc_type':'research_task', 'topic':'math/self-rewrite', 'note':'cf_from_model' },\\n        { 'desc_type':'limit_shape_probe', 'note':'cf_from_model' },\\n        { 'desc_type':'generator_self_patch', 'code':'# self patch from model', 'note':'cf_from_model' }\\n    ]\\n    scored = [( _score_desc(d, model), d) for d in cand]\\n    scored.sort(key=lambda x: x[0], reverse=True)\\n    best = [d for _,d in scored[:2]]\\n    for d in best: d['from'] = 'host_model_guided'\\n    return best"
}
