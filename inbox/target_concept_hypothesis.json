{
  "desc_type": "module_emit",
  "name": "target_concept_hypothesis",
  "code": "import os, json, time\\nDELTA = 'mem/host_model/implicit_host_delta.json'\\nOUT = 'mem/host_model'\\nCUES = {\\n  'TYPE:research_task': 'mathward',\\n  'W:math': 'mathward',\\n  'W:research': 'mathward',\\n  'W:cortex': 'structure',\\n  'W:planner': 'structure',\\n  'W:evaluator': 'structure',\\n  'W:transition': 'structure'\\n}\\n\\ndef _load_delta():\\n    if not os.path.exists(DELTA): return None\\n    with open(DELTA, 'r', encoding='utf-8') as f: return json.load(f)\\n\\ndef run(ctx=None):\\n    d = _load_delta()\\n    if not d: return {'desc_type':'target_concept_idle'}\\n    delta = d.get('delta') or {}\\n    votes = {'mathward':0, 'structure':0}\\n    for feat, dv in delta.items():\\n        cue = CUES.get(feat)\\n        if not cue: continue\\n        votes[cue] += dv\\n    # dÃ©cision\\n    if votes['mathward'] == 0 and votes['structure'] == 0:\\n        hyp = 'unsure'\\n    elif votes['mathward'] >= votes['structure']:\\n        hyp = 'mathward'\\n    else:\\n        hyp = 'structure'\\n    path = os.path.join(OUT, 'implicit_target_hypothesis.json')\\n    with open(path, 'w', encoding='utf-8') as f:\\n        json.dump({'desc_type':'implicit_target_hypothesis','ts':time.time(),'hyp':hyp,'votes':votes}, f, ensure_ascii=False, indent=2)\\n    return {'desc_type':'implicit_target_hypothesis','hyp':hyp,'votes':votes}"
}
